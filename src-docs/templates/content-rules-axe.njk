{% macro wcagVersion(id) %}
  {% if id === 'WCAG21' %}
    (new in WCAG 2.1)
  {% endif %}
  {% if id === 'WCAG22' %}
    (new in WCAG 2.2)
  {% endif %}
{% endmacro %}

<!DOCTYPE html>
<html lang="en-us">
  <head>
    {% include "./head.njk" %}
  </head>
  <body>
    {% include "./header.njk" %}

    <!-- Main section-->
    <div id="main-section" class="container px-4">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">{{title | safe}}</li>
        </ol>
      </nav>
      <main class="row gx-4 justify-content-center">
        <div class="col-lg-10">
          {% block content %}

          <h1>{{title}}</h1>

          {% include "./nav-rulesets.njk" %}

          {% for rc in allRuleCategories %}
            <h2 id="rc-{{rc.id}}" class="rules">{{rc.title}}</h2>
            <table class="table table-striped" aria-labelledby="rc-{{rc.id}}">
              <thead>
                <th>Rule ID</th>
                <th>OpenA11y Rule Summary</th>
                <th>Related aXe Rules</th>
              </thead>
              <tbody>
              {% if rc.hasAxeRules %}
                {% for r in rc.rules %}
                  {% if r.axe_rules.length %}
                    <tr id="{{r.htmlId}}">
                      <td>{{r.id}}</td>
                      <td><a href="{{r.filename | safe}}#rc">{{r.summary | safe}}</a></td>
                      <td>
                        <ul>
                          {% for r in r.axe_rules %}
                            <li><a href="{{r.url | safe}}">{{r.title | safe}}</a> ({{r.impact}}) </li>
                          {% endfor %}
                       </ul>
                      </td>
                    </tr>
                  {% endif %}
                {% else %}
                  <tr>
                    <td colspan="10"><em>no rules</em></td>
                  </tr>
                {% endfor %}
              {% else %}
                  <tr>
                    <td colspan="12"><em>no aXe rules mapped for this category</em></td>
                  </tr>
              {% endif %}
              </tbody>
            </table>
          {% endfor %}

          {% endblock %}

          <h2 id="axe-rules" class="rules">Unmapped aXe Rules</h2>
          <p>{{unmappedAxeRules.length}} of {{allAxeRules.length}} of aXe rules are NOT mapped to OpenA11y rules.</p>
          <table class="table table-striped" aria-labelledby="axe-rules">
            <thead>
              <th>aXe Rule</th>
              <th>Type</th>
              <th>Impact</th>
            </thead>
            <tbody>
            {% for r in unmappedAxeRules %}
              <tr>
                <td>
                  <a href="{{r.url | safe}}">{{r.title | safe}}</a>
                </td>
                <td>
                  {{r.type | safe}}
                </td>
                <td>
                  {{r.impact | safe}}
                </td>
              </tr>
            {% endfor %}
            </tbody>
          </table>

        </div>
      </main>
    </nav>
    {% include "./footer.njk" %}
    {% include "./scripts.njk" %}
  </body>
</html>

